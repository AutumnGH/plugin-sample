# MessageNote 项目计划书

**项目名称**：MessageNote
**文档版本**：v1.0
**日期**：2026-02-24

---

## 一、项目背景与目标

现代人的日常想法、灵感、事件往往以碎片化的形式产生，难以被系统性地记录和整理。传统日记工具要求用户主动组织语言，门槛较高；而纯粹的消息记录又缺乏结构，难以回溯和利用。

MessageNote 旨在解决这一矛盾：用户只需像发消息一样随手记录，系统借助 AI 自动完成整理、归纳与结构化，最终形成有价值的个人知识库。

**核心目标**：
- 降低记录门槛，让用户专注于"输入"而非"整理"
- 通过 AI 将碎片信息转化为结构化的日记与数据库条目
- 构建个人专属的、持续生长的知识管理系统

---

## 二、产品定位

| 维度 | 描述 |
|------|------|
| 目标用户 | 有记录习惯或希望建立记录习惯的个人用户 |
| 核心价值 | 碎片输入，结构输出；AI 整理，用户掌控 |
| 产品形态 | 桌面端优先（本地数据），可扩展至 Web / 移动端 |
| 差异化 | 消息流 + 日记 + 数据库三位一体，AI 全程串联 |

---

## 三、产品架构

### 3.1 三大板块

#### 板块一：Message 消息

用户与系统交互的入口。提供一个常驻的聊天式输入框，用户以发消息的方式随时记录想法、事件、感受。

- 支持文本、图片、链接等多种内容类型
- 每条消息自动附加时间戳，按日归档
- 消息为原始素材，不强制结构化
- 可回溯查看任意一天的原始消息流

#### 板块二：Daily Note 日记

每日一份的个人日记，由 AI 根据当天的 Messages 自动生成，用户可直接编辑。

- AI 汇总当日消息，提炼主题、归纳事件、保留情绪与细节
- 生成富文本日记草稿，用户可自由修改补充
- 通过日历视图按月/周浏览历史日记
- 保留 AI 初稿与用户修改的版本记录

#### 板块三：Database 数据库

类 Notion 数据库页面，由用户根据自身需求自行创建和定义。

- 用户可创建任意数量的数据库（如：读书记录、项目追踪、消费记录、健康日志等）
- 每个数据库支持自定义字段类型（文本、数字、日期、单选、多选、关联等）
- AI 自动识别日记和消息中的相关内容，主动写入对应数据库
- 用户可随时手动增删改查数据库条目

---

### 3.2 两大环节

#### 环节一：输入 → 日记生成

```
用户发送 Messages（全天持续输入）
           ↓
AI 汇总当日所有 Messages
           ↓
生成 Daily Note 草稿（提炼、归纳、润色）
           ↓
用户审阅 / 手动编辑补充
           ↓
Daily Note 定稿，存入日历归档
```

触发方式：每日定时自动触发（如晚间 22:00），或用户手动触发。

#### 环节二：日记 → 数据库同步

```
Daily Note 内容 + 当日 Messages
           ↓
AI 分析内容，匹配用户已创建的数据库结构
           ↓
识别到相关内容 → 自动执行写入操作：
  · 新增数据库条目
  · 填充字段值
  · 补充已有条目的缺失属性
  · 必要时建议添加新字段
           ↓
用户在数据库中查看、确认或修改
```

---

## 四、功能清单

### 4.1 Message 板块

| 功能 | 优先级 | 说明 |
|------|--------|------|
| 文本消息输入 | P0 | 支持多行文本，回车发送 |
| 时间戳自动记录 | P0 | 精确到分钟 |
| 按日归档 | P0 | 消息自动归属当天 |
| 历史消息查看 | P1 | 可按日期切换查看 |
| 图片上传 | P1 | 支持粘贴或拖拽上传 |
| 链接预览 | P2 | 自动抓取链接标题与摘要 |
| 消息编辑/删除 | P2 | 发送后可修改或撤回 |

### 4.2 Daily Note 板块

| 功能 | 优先级 | 说明 |
|------|--------|------|
| AI 自动生成日记 | P0 | 基于当日 Messages 生成 |
| 富文本编辑器 | P0 | 支持标题、列表、加粗等基础格式 |
| 日历视图 | P0 | 按月展示，点击查看当日日记 |
| 手动触发生成 | P1 | 用户可随时重新生成或更新 |
| 版本历史 | P1 | 保留 AI 初稿与每次编辑记录 |
| 日记导出 | P2 | 支持导出为 Markdown / PDF |

### 4.3 Database 板块

| 功能 | 优先级 | 说明 |
|------|--------|------|
| 创建数据库 | P0 | 用户自定义名称与字段 |
| 字段类型支持 | P0 | 文本、数字、日期、单选、多选 |
| 手动增删改查 | P0 | 完整的数据库 CRUD 操作 |
| AI 自动写入 | P0 | 识别相关内容后自动登记 |
| 字段关联 | P1 | 数据库之间的字段关联 |
| 筛选与排序 | P1 | 按字段筛选、排序数据 |
| 视图切换 | P2 | 表格视图 / 看板视图 |

---

## 五、AI 能力设计

### 5.1 日记生成能力

- **语义理解**：理解碎片消息的上下文与情绪
- **内容整合**：将零散事件整合为连贯叙述
- **风格保持**：保留用户的表达习惯与个人色彩
- **结构化输出**：生成带有层次结构的日记文本

### 5.2 数据库写入能力

- **意图识别**：理解用户创建数据库的目的与字段含义
- **内容匹配**：从日记/消息中识别与数据库相关的信息
- **字段提取**：从非结构化文本中提取结构化字段值
- **主动扩展**：当现有字段不足时，建议或自动添加新属性
- **去重判断**：避免重复写入已存在的条目

### 5.3 AI 调用策略

- 日记生成：每日触发一次，批量处理当日消息
- 数据库同步：日记生成后自动触发，或用户手动触发
- 模型选型：Claude claude-sonnet-4-6（兼顾能力与成本）
- 用户可配置 AI 行为：是否自动写入数据库、写入前是否需要确认

---

## 六、技术选型

| 层级 | 方案 | 备注 |
|------|------|------|
| 桌面端框架 | Tauri + React | 轻量、本地优先、跨平台 |
| 前端 UI | React + TailwindCSS | 组件化开发 |
| 富文本编辑器 | TipTap | 可扩展性强，支持自定义节点 |
| 日历组件 | FullCalendar | 功能完整，支持自定义渲染 |
| 本地数据库 | SQLite（via Tauri） | 本地存储，无需服务器 |
| AI 接入 | Claude API | claude-sonnet-4-6 |
| 数据同步（可选） | 自建后端 / iCloud / Dropbox | Phase 3 扩展 |

---

## 七、用户交互流程示例

```
08:30  用户发送消息："今天要准备季度汇报，有点紧张"
12:00  用户发送消息："午饭吃了沙拉，在控制饮食"
14:30  用户发送消息："汇报顺利结束，老板对数据分析部分很满意"
19:00  用户发送消息："晚上读了《原则》第三章，关于极度透明的部分很有启发"
22:00  [系统自动触发]
         ↓
       AI 生成 Daily Note：
       "今天是充实的一天。带着对季度汇报的紧张感开始，
        午间坚持了健康饮食的计划，下午汇报顺利收官，
        数据分析的努力得到了认可。晚间读《原则》，
        极度透明的理念让人深思……"
         ↓
       AI 识别相关内容，写入数据库：
       · 「读书记录」← 书名:《原则》/ 章节:第三章 / 日期:今天 / 摘要:极度透明
       · 「健康日志」← 日期:今天 / 饮食:沙拉 / 备注:控制饮食
       · 「工作记录」← 日期:今天 / 事项:季度汇报 / 结果:顺利，获好评
```

---

## 八、开发阶段规划

### Phase 1 — MVP（核心闭环）

**目标**：跑通"消息 → 日记"的完整流程

- [ ] Message 输入框与按日归档
- [ ] AI 生成 Daily Note
- [ ] 日历视图浏览日记
- [ ] 基础富文本编辑

**交付标准**：用户可以发消息、看到 AI 生成的日记、通过日历查看历史

---

### Phase 2 — 数据库（智能写入）

**目标**：跑通"日记 → 数据库"的完整流程

- [ ] 用户创建自定义数据库与字段
- [ ] 数据库 CRUD 操作界面
- [ ] AI 自动识别并写入数据库
- [ ] 写入结果的用户确认与修改

**交付标准**：用户创建数据库后，AI 能自动从日记中提取并写入相关内容

---

### Phase 3 — 完善（体验提升）

**目标**：提升产品完整度与用户体验

- [ ] 多端数据同步
- [ ] 数据导出（Markdown / PDF / CSV）
- [ ] 数据库视图扩展（看板、筛选、排序）
- [ ] AI 行为配置（写入策略、风格偏好）
- [ ] 消息支持图片与链接预览

---

## 九、风险与应对

| 风险 | 影响 | 应对策略 |
|------|------|----------|
| AI 写入数据库准确率不足 | 用户信任度下降 | 写入前提供预览确认，支持一键撤销 |
| 本地数据丢失 | 用户数据损失 | 自动备份机制，支持导出 |
| AI API 成本过高 | 产品可持续性 | 批量处理、缓存策略、用量控制 |
| 富文本编辑器性能 | 使用体验差 | 选用成熟方案（TipTap），避免自研 |
| 数据库结构复杂度 | 开发周期延长 | Phase 1 不涉及数据库，分阶段交付 |

---

## 十、成功指标

| 指标 | 目标值 |
|------|--------|
| 日记生成满意度 | 用户修改率 < 30%（说明 AI 生成质量高） |
| 数据库写入准确率 | 正确写入率 > 85% |
| 日活消息数 | 用户平均每日发送 ≥ 3 条消息 |
| 日记查看率 | 生成后 24h 内查看率 > 70% |

---

*本文档为 MessageNote 项目初始规划，随开发推进持续更新。*
